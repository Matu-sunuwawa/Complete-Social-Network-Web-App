{% load static %}

<div class="d-flex align-items-center mb-3">
  <button
     class="btn btn-link text-decoration-none text-primary p-0"
     hx-get="{{ back_url }}"
     hx-target="#main-content-area"
     hx-push-url="true">
    ‚Üê Back
  </button>
</div>

<div class="bg-white rounded-5 p-4 shadow-sm mb-4">
    <h2 class="h5 fw-bold mb-4">Edit Post</h2>

    <form hx-post="{% url 'post:post_update' post.id %}?next={{ back_url|urlencode }}"
          hx-target="#main-content-area">
        {% csrf_token %}

        <div class="d-flex align-items-start gap-3">
            {% if request.user.profile.profile_pic %}
                <img src="{{ request.user.profile.profile_pic.url }}" class="follower-avatar" alt="Profile">
            {% else %}
                <img src="{% static 'assets/default-avatar.png' %}" class="follower-avatar" alt="Profile">
            {% endif %}

            <textarea name="content"
                      class="form-control border-0 shadow-none fs-5 p-0"
                      rows="4"
                      placeholder="Update your post..."
                      style="resize: none;"
                      required>{{ post.content }}</textarea>
        </div>

        {% if post.images.all or post.image %}
        <div class="mt-3 p-3 bg-light rounded-4">
            <p class="text-muted small mb-0">
                <img src="{% static 'assets/image-24-outlined.svg' %}" width="16" class="me-1 opacity-50">
                This post contains images. Photos cannot be changed after posting.
            </p>
        </div>
        {% endif %}

        <div class="border-top d-flex justify-content-end align-items-center pt-3 mt-3">
            <button type="submit" class="btn btn-primary fw-bold px-3 rounded-pill">
                Save Changes
            </button>
        </div>
    </form>
</div>
