{% extends 'core/base.html' %}
{% load static %}

{% block title %}Feed | Social App{% endblock %}

<style>
    .htmx-indicator {
        opacity: 0;
        visibility: hidden;
    }
    .htmx-request .htmx-indicator,
    .htmx-request.htmx-indicator {
        opacity: 1;
        visibility: visible;
        transition: opacity 200ms ease-in;
    }
</style>

{% block content %}
<div class="row align-items-start">

    {% include "core/includes/_left_sidebar.html" %}

    <div class="col col-md-9 col-lg-6" id="main-content-area">
        {% include 'core/partials/home_content.html' %}
    </div>

    {% include "core/includes/_right_sidebar.html" %}

</div>
<script>
    function handleImagePreview(input, postId) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById(`image-preview-${postId}`);
                const container = document.getElementById(`image-container-${postId}`);
                const clearCheckbox = document.getElementById(`image-clear-${postId}`);

                if (preview) preview.src = e.target.result;
                if (container) container.classList.remove('d-none');
                if (clearCheckbox) clearCheckbox.checked = false;
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function handleImageRemove(postId) {
        const container = document.getElementById(`image-container-${postId}`);
        const uploadInput = document.getElementById(`image-upload-${postId}`);
        const clearCheckbox = document.getElementById(`image-clear-${postId}`);

        if (container) container.classList.add('d-none');
        if (uploadInput) uploadInput.value = "";
        if (clearCheckbox) clearCheckbox.checked = true;
    }
</script>
{% endblock %}
